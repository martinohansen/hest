{{define "content"}}
<div id="h2h-container" class="stack">
  {{if not .ShowResults}}
  <form
    hx-get="/h2h"
    hx-target="#h2h-container"
    hx-swap="outerHTML"
    hx-push-url="true"
    class="stack"
  >
    <div class="h2h-selects">
      <label class="stack">
        <span>Spiller 1</span>
        <select name="player1" required>
          <option value="">Vælg...</option>
          {{range .Players}}
          <option value="{{.ID}}" {{if eq $.Player1ID .ID}}selected{{end}}>
            {{.Emoji}} {{.Name}}
          </option>
          {{end}}
        </select>
      </label>
      <label class="stack">
        <span>Spiller 2</span>
        <select name="player2" required>
          <option value="">Vælg...</option>
          {{range .Players}}
          <option value="{{.ID}}" {{if eq $.Player2ID .ID}}selected{{end}}>
            {{.Emoji}} {{.Name}}
          </option>
          {{end}}
        </select>
      </label>
    </div>
    <button type="submit">Sammenlign</button>
  </form>
  {{end}} {{if .ShowResults}}
  <div class="stack">
    {{if eq .Stats.SharedGames 0}}
    <p><em>Ingen head-to-head kampe endnu.</em></p>
    {{else}}

    <div class="h2h-results">
      <div class="h2h-player">
        <h1 class="h2h-name h2h-name--right">
          <a
            class="h2h-name-link"
            href="/player?id={{.Stats.Player1.ID}}"
            aria-label="{{.Stats.Player1.Name}} {{.Stats.Player1.Emoji}}"
            title="{{.Stats.Player1.Name}} {{.Stats.Player1.Emoji}}"
          >
            <span class="h2h-name-text">{{.Stats.Player1.Name}}</span>
            <span class="h2h-emoji" aria-hidden="true"
              >{{.Stats.Player1.Emoji}}</span
            >
          </a>
        </h1>
        <div class="h2h-stat-grid">
          <div class="stat">
            <span class="stat-label responsive-label">
              <span class="label-full nowrap">2. plads</span>
              <abbr class="label-short" title="2. plads">2</abbr>
            </span>
            <span class="stat-value">{{.Stats.Player1Stats.Seconds}}</span>
          </div>
          <div class="stat">
            <span class="stat-label responsive-label">
              <span class="label-full">Vundet</span>
              <abbr class="label-short" title="Vundet">V</abbr>
            </span>
            <span class="stat-value">{{.Stats.Player1Stats.Wins}}</span>
          </div>
          <div class="stat">
            <span class="stat-label responsive-label">
              <span class="label-full">Point</span>
              <abbr class="label-short" title="Point">P</abbr>
            </span>
            <span class="stat-value">{{.Stats.Player1Stats.Points}}</span>
          </div>
        </div>
      </div>

      <div class="h2h-divider" aria-hidden="true"></div>

      <div class="h2h-player">
        <h1 class="h2h-name h2h-name--left">
          <a
            class="h2h-name-link"
            href="/player?id={{.Stats.Player2.ID}}"
            aria-label="{{.Stats.Player2.Emoji}} {{.Stats.Player2.Name}}"
            title="{{.Stats.Player2.Emoji}} {{.Stats.Player2.Name}}"
          >
            <span class="h2h-emoji" aria-hidden="true"
              >{{.Stats.Player2.Emoji}}</span
            >
            <span class="h2h-name-text">{{.Stats.Player2.Name}}</span>
          </a>
        </h1>
        <div class="h2h-stat-grid">
          <div class="stat">
            <span class="stat-label responsive-label">
              <span class="label-full">Point</span>
              <abbr class="label-short" title="Point">P</abbr>
            </span>
            <span class="stat-value">{{.Stats.Player2Stats.Points}}</span>
          </div>
          <div class="stat">
            <span class="stat-label responsive-label">
              <span class="label-full">Vundet</span>
              <abbr class="label-short" title="Vundet">V</abbr>
            </span>
            <span class="stat-value">{{.Stats.Player2Stats.Wins}}</span>
          </div>
          <div class="stat">
            <span class="stat-label responsive-label">
              <span class="label-full nowrap">2. plads</span>
              <abbr class="label-short" title="2. plads">2</abbr>
            </span>
            <span class="stat-value">{{.Stats.Player2Stats.Seconds}}</span>
          </div>
        </div>
      </div>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th>Dato</th>
          <th class="nowrap">Vinder</th>
          <th class="nowrap">2. plads</th>
          <th class="hide-small">Deltagere</th>
        </tr>
      </thead>
      <tbody>
        {{range .Stats.SharedGamesList}}
        <tr>
          <td>{{.PlayedAt.Format "2006-01-02"}}</td>
          <td class="nowrap">
            <a href="/player?id={{.Winner.ID}}"
              >{{.Winner.Emoji}} {{.Winner.Name}}</a
            >
          </td>
          <td class="nowrap">
            <a href="/player?id={{.Second.ID}}"
              >{{.Second.Emoji}} {{.Second.Name}}</a
            >
          </td>
          <td class="hide-small">
            {{range .Participants}}<a
              href="/player?id={{.ID}}"
              title="{{.Name}}"
              >{{.Emoji}}</a
            >{{end}}
          </td>
        </tr>
        {{end}}
      </tbody>
    </table>
    {{end}}
  </div>
  {{end}}
</div>
{{end}}
